<?xml version="1.0" encoding="UTF-8"?>
<!--
	Script : Ant build script to create the RCP application
	Author : Debadatta Mishra (Technical Architect)
-->
<project name="prolinercp" basedir="." default="build.plugin">

	<property name="src.dir" 							value="src"/>
	<property name="bin.dir" 							value="bin"/>
	<property name="build.dir" 							value="build"/>
	<property name="lib.dir" 							value="${basedir}/lib" />
	<property name="plugin.lib.dir" 					value="${basedir}/eclipse-plugins" />
	<property name="pluginsetup.dir" 					value="prolinesetup" />
	<property name="pluginsetup.plugins.dir" 			value="${pluginsetup.dir}/plugins" />
	<property name="metainf.dir" 						value="META-INF" />
	<property name="icons.dir" 							value="icons" />
	<property name="eclipse.config.dir" 				value="eclipse-config" />
	<property name="config.dir" 						value="config" />	
	<property name="dist.dir" 							value="dist" />	

	<!-- Setting the class path -->
	<path id="classpath">
		<fileset dir="${plugin.lib.dir}">
			<include name="**/*.jar" />
		</fileset>
		<fileset dir="${lib.dir}">
			<include name="**/*.jar" />
		</fileset>
	</path>

	<target name="init">
		<delete dir="${bin.dir}"/>
		<mkdir dir="${bin.dir}"/>
		<delete dir="${pluginsetup.dir}"/>
		<mkdir dir="${pluginsetup.dir}"/>
		<delete dir="${build.dir}"/>
		<mkdir dir="${build.dir}"/>
		<delete dir="${dist.dir}"/>
		<mkdir dir="${dist.dir}"/>
	</target>
	
	<target name="full.clean">
		<delete dir="${pluginsetup.dir}"/>
		<delete dir="${build.dir}"/>
	</target>

	<target name="compile" depends="init">
		<javac srcdir="${src.dir}" destdir="${bin.dir}" classpathref="classpath" includeantruntime="false"/>
		<copy todir="${build.dir}">
			<fileset dir="${bin.dir}" />
		</copy>
		<copy todir="${build.dir}/META-INF">
			<fileset dir="${metainf.dir}"/>
		</copy>
		<copy todir="${build.dir}/icons">
			<fileset dir="${icons.dir}"/>
		</copy>
		<copy todir="${build.dir}/lib">
			<fileset dir="${lib.dir}"/> 
		</copy>
		<copy file="${basedir}/plugin.xml" 		todir="${build.dir}"/>
		<copy file="${basedir}/pro_logo_small.png" 	todir="${build.dir}"/>
		<copy file="${basedir}/splash.bmp" 		todir="${build.dir}"/>
	</target>
	
	<target name="create.jar" depends="compile">
		<copy file="${eclipse.config.dir}/config.ini" todir="${pluginsetup.dir}/configuration"/>
		<!--<copy file="${eclipse.config.dir}/.eclipseproduct" todir="${pluginsetup.dir}"/> -->
		<copy file="${eclipse.config.dir}/proline.exe" todir="${pluginsetup.dir}"/>
		<jar destfile="${pluginsetup.plugins.dir}/${ant.project.name}_1.0.0.jar" basedir="${build.dir}" manifest="${basedir}/META-INF/MANIFEST.MF"/>
		<copy file="${pluginsetup.plugins.dir}/${ant.project.name}_1.0.0.jar" todir="${dist.dir}"/>
	</target>

	<target name="build.plugin" depends="create.jar">
		<copy todir="${pluginsetup.dir}/config">
			<fileset dir="${config.dir}" />
		</copy>
		<copy todir="${pluginsetup.plugins.dir}/org.eclipse.core.runtime.compatibility.registry_3.5.300.v20140128-0851">
			<fileset dir="${plugin.lib.dir}/org.eclipse.core.runtime.compatibility.registry_3.5.300.v20140128-0851" />
		</copy>
		<copy todir="${pluginsetup.plugins.dir}/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20140521-1744">
			<fileset dir="${plugin.lib.dir}/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20140521-1744" />
		</copy>
		<copy file="${plugin.lib.dir}/com.ibm.icu_52.1.0.v201404241930.jar" 								todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/javax.annotation_1.2.0.v201401042248.jar" 							todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/javax.inject_1.0.0.v20091030.jar" 									todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/javax.xml_1.3.4.v201005080400.jar" 									todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.apache.batik.css_1.7.0.v201011041433.jar" 						todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.apache.batik.util.gui_1.7.0.v200903091627.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.apache.batik.util_1.7.0.v201011041433.jar" 						todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.ant.core_3.3.0.v20140518-0042.jar" 						todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.commands_3.6.100.v20140424-2344.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.contenttype_3.4.200.v20140207-1251.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.databinding.observable_1.4.1.v20140210-1835.jar" 	todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.databinding.property_1.4.200.v20140214-0004.jar" 	todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.databinding_1.4.1.v20140214-0004.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.expressions_3.4.600.v20140128-0851.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.filesystem.java7_1.0.0.v20140429-1531.jar" 			todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.filesystem.win32.x86_64_1.4.0.v20140124-1940.jar" 	todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.filesystem_1.4.100.v20140514-1614.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.jobs_3.6.0.v20140424-0053.jar" 						todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.resources.win32.x86_64_3.5.0.v20140124-1940.jar" 	todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.resources_3.9.0.v20140514-1307.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.runtime_3.10.0.v20140318-2214.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.core.variables_3.2.800.v20130819-1716.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.core.commands_0.10.2.v20140424-2344.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.core.contexts_1.3.100.v20140407-1019.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.core.di.extensions_0.12.0.v20140417-2033.jar" 			todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.core.di_1.4.0.v20140414-1837.jar" 						todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.core.services_1.2.0.v20140509-1840.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.bindings_0.10.200.v20140424-2042.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.css.core_0.10.100.v20140424-2042.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.css.swt.theme_0.9.300.v20140424-2042.jar" 			todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.css.swt_0.11.100.v20140522-1045.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.di_1.0.0.v20140328-2112.jar" 						todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.model.workbench_1.1.0.v20140512-1820.jar" 			todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.services_1.1.0.v20140328-1925.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.widgets_1.0.0.v20140514-1823.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.workbench.addons.swt_1.1.0.v20140512-1905.jar" 		todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.workbench.renderers.swt_0.12.0.v20140521-1818.jar" 	todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.workbench.swt_0.12.100.v20140509-1922.jar" 			todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.workbench_1.1.0.v20140513-1854.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.e4.ui.workbench3_0.12.0.v20140227-2118.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.emf.common_2.10.0.v20140514-1158.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.emf.ecore.change_2.10.0.v20140514-1158.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.emf.ecore.xmi_2.10.0.v20140514-1158.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.emf.ecore_2.10.0.v20140514-1158.jar" 						todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.equinox.app_1.3.200.v20130910-1609.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.equinox.bidi_0.10.0.v20130327-1442.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.equinox.common_3.6.200.v20130402-1505.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.equinox.ds_1.4.200.v20131126-2331.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.equinox.event_1.3.100.v20140115-1647.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.equinox.launcher_1.3.0.v20140415-2008.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.equinox.preferences_3.5.200.v20140224-1527.jar" 			todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.equinox.registry_3.5.400.v20140428-1507.jar" 				todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.equinox.util_1.0.500.v20130404-1337.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.help_3.6.0.v20130326-1254.jar" 							todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.help.base_4.0.200.v20140522-1330.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.help.ui_4.0.100.v20140401-0608.jar" 						todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.help.webapp_3.6.300.v20140407-1855.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.jface.databinding_1.6.200.v20140214-0004.jar" 			todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.jface_3.10.0.v20140507-1527.jar" 							todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.osgi.compatibility.state_1.0.0.v20140403-1907.jar" 		todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.osgi.services_3.4.0.v20140312-2051.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.osgi_3.10.0.v20140513-1456.jar" 							todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.swt.win32.win32.x86_64_3.103.0.v20140522-1614.jar" 		todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.swt_3.103.0.v20140522-1609.jar" 							todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.ui.workbench_3.106.0.v20140521-1818.jar" 					todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.eclipse.ui_3.106.0.v20140519-0906.jar" 							todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.w3c.css.sac_1.3.1.v200903091627.jar" 								todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.w3c.dom.events_3.0.0.draft20060413_v201105210656.jar" 			todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.w3c.dom.smil_1.0.0.v200806040011.jar" 							todir="${pluginsetup.plugins.dir}"/>
		<copy file="${plugin.lib.dir}/org.w3c.dom.svg_1.1.0.v201011041433.jar" 								todir="${pluginsetup.plugins.dir}"/>
		
	</target> 
</project>